{% extends "dashboard/nav.html" %}

{% block main %}
    <hr>
    <h2>Projects</h2>
    <hr>

    <div class="table-responsive">
        <table class="table table-dark">
            <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Languages</th>
                    <th>Image</th>
                    <th>Video</th>
                    <th>Git URL</th>
                    <th>Live URL</th>
                    <th>Order</th>
                    <th>Update</th>
                    <th>Delete</th>
                </tr>
            </thead>

            <tbody>
                {% for row in project %}
                <tr>
                    <th>{{loop.index}}</th>
                    <td>{{row['name']}}</td>
                    <td>{{row['description'][:50]}}...</td>
                    <td>{{row['languages']}}</td>
                    <td>
                        {% if row['img'] %}
                            <img src="{{row['img']}}" alt="Image" style="max-width: 100px; max-height: 60px;" class="img-thumbnail">
                        {% else %}
                            <span class="text-muted">No image</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if row['video'] %}
                            <a href="{{row['video']}}" target="_blank" class="text-decoration-none">
                                <i class="bi bi-youtube"></i> YouTube
                            </a>
                        {% else %}
                            <span class="text-muted">No video</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if row['git_url'] %}
                            <a href="{{row['git_url']}}" target="_blank" class="text-decoration-none">Git</a>
                        {% else %}
                            <span class="text-muted">-</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if row['live_url'] %}
                            <a href="{{row['live_url']}}" target="_blank" class="text-decoration-none">Live</a>
                        {% else %}
                            <span class="text-muted">-</span>
                        {% endif %}
                    </td>
                    <td>{{row['order'] or '-'}}</td>
                    <td>
                        <form action="/dashboard" method="post">
                            <button name="btn" value="{{row['id']}}" type="submit" class="btn btn-sm btn-warning">Update</button>
                        </form>
                    </td>
                    <td>
                        <form action="/dashboard/delete" method="post">
                            <button name="btn" value="{{row['id']}}" type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this project?')">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
                    
            </tbody>
        </table>
    </div>

    <hr>
    <h2>Contact</h2>
    <hr>

    <div class="table-responsive">
        <table class="table table-dark">
            <thead>
                <tr>
                    <th></th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Message</th>
                </tr>
            </thead>

            <tbody>
                {% for row in contact %}
                <tr>
                    <th>{{loop.index}}</th>
                    <td>{{row['fname']}}</td>
                    <td>{{row['lname']}}</td>
                    <td>{{row['email']}}</td>
                    <td>{{row['message'][:100]}}{% if row['message']|length > 100 %}...{% endif %}</td>
                </tr>
                {% endfor %}
                    
            </tbody>
        </table>
    </div>
{% endblock %}